<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Surat Ulang Tahun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preload" href="fonts/CafeMatcha.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="assets/backsound.mp3" as="audio" />
  <style>
    @font-face {
      font-family: 'CafeMatcha';
      src: url('fonts/CafeMatcha.ttf') format('truetype');
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'CafeMatcha', cursive;
      background-color: #fce4ec;
      color: #5a2a2a;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    #dark-overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.2);
      z-index: 1;
      pointer-events: none;
    }

    #container {
      text-align: center;
      padding: 40px 20px;
      max-width: 90%;
      font-size: 1.5em;
      z-index: 2;
    }

    .slide {
      display: none;
      opacity: 0;
      transition: all 0.6s ease;
    }

    .slide.active {
      display: block;
      opacity: 1;
    }

    .next-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #ffb6c1;
      color: #5a2a2a;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      font-family: 'CafeMatcha';
      border-radius: 20px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 3;
    }

    .next-btn.show {
      opacity: 1;
    }

    .gif-container img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
    }

    .quiz-option {
      background: #fff;
      border: 2px solid #f8bbd0;
      margin: 10px;
      padding: 10px;
      border-radius: 12px;
      cursor: pointer;
    }

    #social-icons {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    #social-icons img {
      width: 24px;
      height: 24px;
    }
  </style>
</head>
<body>

<div id="dark-overlay"></div>

<audio autoplay loop id="bgm" src="assets/backsound.mp3"></audio>

<div id="container">
  <div class="slide active" id="slide0"></div>
  <div class="slide" id="slide1"></div>
  <div class="slide" id="slide2"></div>
  <div class="slide" id="slide3"></div>
  <div class="slide" id="slide4"></div>
  <div class="slide" id="slide5"></div>
  <div class="slide" id="slide6"></div>
  <div class="slide" id="slide7"></div>
  <div class="slide" id="slide8"></div>
  <div class="slide" id="slide9">
  <div class="gif-container">
    <img src="assets/ayunan.gif" alt="GIF" />
  </div>
  <p style="margin-top: 20px; font-size: 0.9em;">Mau main tebak-tebakan gak?</p>

  <div id="quiz-choice">
    <button onclick="skipQuiz()" class="next-btn show">gakk</button>
    <button onclick="nextSlide()" class="next-btn show">mauu</button>
  </div>
  </div>
  
  <div class="slide" id="slide10">
    <p>Kenapa langit selalu terlihat indah, tapi gak seindah kamu?</p>
    <div class="quiz-option" onclick="answerQuiz()">Karena kamu senyumnya lebih cerah â˜€ï¸</div>
    <div class="quiz-option" onclick="answerQuiz()">Karena kamu bikin aku nyaman ğŸ’–</div>
    <div class="quiz-option" onclick="answerQuiz()">Karena kamu yang selalu aku cari ğŸŒ·</div>
    <p id="quiz-response" style="margin-top:20px; font-style: italic;"></p>
    <div id="after-quiz" style="display:none;">
      <button class="next-btn show" onclick="restartPage()">ğŸ” Ulangi</button>
      <div id="social-icons">
        <a href="https://wa.me/qr/VKPXEOZVLGRSE1" target="_blank">
          <img src="assets/wa.png" alt="WhatsApp"
        </a>
        <a href="https://www.instagram.com/rcoerfn_" target="_blank">
          <img src="assets/ig.png" alt="Instagram">
        </a>
      </div>
    </div>
  </div>
</div>

<button class="next-btn" id="nextBtn" onclick="nextSlide()">Lanjut â¤</button>

<script>
  const name = localStorage.getItem("username");
  const dob = localStorage.getItem("dob");

  if (!name || !dob) {
    alert("Akses tidak valid. Mulai dari awal ya.");
    window.location.href = "index.html";
  }

  const slides = [
`Hari ini... adalah hari ulang tahunmu.

Tapi ini bukan sekadar hari tentang lilin, kue, atau ucapan-ucapan cepat dari notifikasi.

Hari iniâ€¦ adalah waktu untuk melihat sejauh mana kamu telah bertahan.

Kamu tidak Cuma bertambah usia.
Tetapi kamu bertambah cerita!
Bertambah luka!
Bertambah pelajaran!

Dan, meski jarang kamu sadari, semakin lama dirimu bertambah kuat..`,

`Kamu pernah menjalani pagi dengan mata bengkak, kadang sakit.
Kamu pernah menyembunyikan tangis dengan tawa.
Kamu pernah pura-pura kuat agar orang lain tak khawatir.
Kamu pernah merasa seperti tidak cukup.

Tapiâ€¦ kamu tetap datang.
Tetap mencoba.
Tetap hidup.
Dan itu adalah keberanian yang sering tidak dihargai.`,

`Kamu pernah kecewa.
Saat harapanmu tak jadi kenyataan.
Saat orang yang kamu percaya malah melukai.
Tapi kamu tidak berubah jadi pahit.
Kamu tetap punya hati yang hangat.

Bahkan saat kamu tidak dimengerti.
Kamu pernah marah. Tapi kamu memilih diam.
Kamu pernah takut. Tapi kamu tetap jalan.
Kamu pernah sedih. Tapi kamu tetap senyum.`,

`Mungkin kamu lelah. Tapi kamu tidak menyerah.
Kadang kamu iri. Tapi kamu tidak pernah berhenti jadi diri sendiri.
Kamu pernah rindu... pada masa lalu.

Tapi kamu tahu... kamu sudah berubah.
Kamu sudah tumbuh.

Dan pertumbuhan itu tidak selalu indah, tapi selalu berarti.`,

`Ada luka yang tak pernah kamu ceritakan.
Ada kesedihan yang tak ada yang tahu.

Dan sekarang kamu di sini. Masih di sini.

Hari ini, bukan tentang pesta.
Tapi tentang pengakuan!

Bahwa kamu istimewa.
Bahwa kamu cukup.
Bahwa kamu telah memberi banyak hal...

Bahkan saat kamu sendiri kosong.`,

`Dan meskipun kamu sering merasa tak terlihatâ€¦

Rico lihat kamu!!!
Rico dengar kamu!!!
Rico perhatikan kamu!!!

Terima kasih sudah bertahan.
Terima kasih sudah hidup.
Terima kasih sudah tidak menyerah.`,

`Hari ini, rasakan semua yang kamu rasakan.
Bahagia, haru, kecewa, cemas, rindu.

Karena semua ituâ€¦ adalah bukti kamu hidup sepenuhnya.

Kamu bukan hanya bertambah umur.
Kamu bertambah makna.
Dan kamu pantas dirayakan.`,

`HAPPY BIRTHDAY ğŸ¤

Semoga tahun ini...
Kamu lebih tenang.
Lebih jujur pada dirimu sendiri.
Lebih berani untuk bahagia.

Rico doakan kamu...
Pulih tanpa terburu-buru,
Bahagia tanpa syarat,
Dicintai tanpa keraguan.`,

`Terima kasih telah membaca secuil pesan dari Rico..

Maaf karna Rico tidak bisa memberikan hal yang spesial untuk dirimu..`
  ];

  let current = 0;
  const nextBtn = document.getElementById("nextBtn");

  function typeText(text, elementId, callback) {
    const element = document.getElementById(elementId);
    element.innerHTML = "";
    let i = 0;
    const lines = text.split("\n");

    function typeLine(lineIndex = 0) {
      if (lineIndex >= lines.length) {
        nextBtn.classList.add("show");
        return callback && callback();
      }

      const line = lines[lineIndex];
      let charIndex = 0;
      const p = document.createElement("p");
      p.style.marginBottom = "20px";
      element.appendChild(p);

      function typeChar() {
        if (charIndex < line.length) {
          p.innerHTML += line.charAt(charIndex);
          charIndex++;
          setTimeout(typeChar, 45);
        } else {
          setTimeout(() => typeLine(lineIndex + 1), 600);
        }
      }
      typeChar();
    }
    typeLine();
  }

  function nextSlide() {
  document.querySelectorAll(".slide")[current].classList.remove("active");
  current++;
  const slidesAll = document.querySelectorAll(".slide");

  if (current < slidesAll.length) {
    const currentSlide = slidesAll[current];
    currentSlide.classList.add("active");
    nextBtn.classList.remove("show");

    if (current <= 8) {
      typeText(slides[current], `slide${current}`);
    } else if (current === 9) {
      // ğŸ§  Tambahkan fungsi render acak di sini
      renderRandomQuiz();
    } else if (current === 10) {
      nextBtn.style.display = "none";
    }
  }
  }

  function answerQuiz(responseText) {
  document.getElementById("quiz-response").innerHTML = responseText;
  document.getElementById("after-quiz").style.display = "block";
  }

  // Mulai slide pertama
  typeText(slides[0], "slide0");

  function restartPage() {
  // Set flag untuk menandai reload via "Ulangi"
  localStorage.setItem("quizRefresh", "true");
  window.location.href = "surat.html";
  }

  function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  }
  

  function renderRandomQuiz() {
  const quiz = quizSets[Math.floor(Math.random() * quizSets.length)];
  const slide9 = document.getElementById("slide9");
  slide9.innerHTML = `
    <div class="gif-container">
      <img src="assets/ayunan.gif" alt="GIF" />
    </div>
    <p style="margin-top: 20px; font-size: 0.9em;">${quiz.question}</p>
    ${quiz.options.map(opt => `<div class="quiz-option" onclick="answerQuiz('${opt.response}')">${opt.text}</div>`).join("")}
    <p id="quiz-response" style="margin-top:20px; font-style: italic;"></p>
    <div id="after-quiz" style="display:none;">
      <button class="next-btn show" onclick="restartPage()">ğŸ” Ulangi</button>
      <div id="social-icons">
        <a href="https://wa.me/qr/VKPXEOZVLGRSE1" target="_blank"><img src="assets/wa.png" alt="WhatsApp"></a>
        <a href="https://www.instagram.com/rcoerfn_" target="_blank"><img src="assets/ig.png" alt="Instagram"></a>
      </div>
    </div>
  `;
  }
  
  const quizSets = [
  {
    question: "Kalau Rico tiba-tiba hilang, kamu bakal...?",
    options: [
      { text: "Panik dong! ğŸ˜±", response: "Awww, jangan panik... tapi lucu juga bayanginnya ğŸ˜…" },
      { text: "Cuek aja, biasa aja ğŸ¤·", response: "Duh, cuek banget sih... Rico sedih nih ğŸ¥²" },
      { text: "Cari dia pakai feeling ğŸ§­", response: "Wahhh kamu detektif cinta nih ya ğŸ˜" }
    ]
  },
  {
    question: "Kalau kamu jadi lagu, kira-kira genrenya apa?",
    options: [
      { text: "Balada sedih ğŸ˜¢", response: "Tapi tetap indah buat didengerin... kayak kamu ğŸ¥º" },
      { text: "Dangdut remix ğŸ¤ª", response: "Gak nyangka... tapi pasti kamu yang paling rame!" },
      { text: "Jazz mellow ğŸ’«", response: "Kamu vibes-nya chill banget yaa... sukaa ğŸ˜Œ" }
    ]
  },
  {
    question: "Kamu lebih mirip hewan apa sih?",
    options: [
      { text: "Kucing ğŸ±", response: "Manja, galak dikit, tapi bikin gemesin ğŸ¥¹" },
      { text: "Koala ğŸ¨", response: "Pantes suka rebahan yaaa... imut gitu soalnya!" },
      { text: "Kupu-kupu ğŸ¦‹", response: "Kamu indah dan tenang... kayak musim semi ğŸŒ¸" }
    ]
  },
  {
    question: "Pilih tempat ngedate bareng Rico dong:",
    options: [
      { text: "Taman malam sambil makan bakso ğŸŒŒ", response: "Romantis + kenyang = perfect ğŸ˜‹" },
      { text: "Nonton bioskop horor ğŸ˜±", response: "Biar bisa pura-pura takut ya? Hehe ketahuan~" },
      { text: "Rumah aja, nonton Netflix ğŸ¿", response: "Netflix and... nasi goreng? ğŸ˜„" }
    ]
  },
  {
    question: "Menurut kamu, Rico itu orangnya gimana?",
    options: [
      { text: "Random banget ğŸ˜…", response: "Ehehehe... emang suka nyasar pikirannya ğŸ˜" },
      { text: "Bikin nyaman ğŸ˜Œ", response: "Aww makasihhh... kamu juga bikin tenang ğŸ«¶" },
      { text: "Suka nyeleneh tapi lucu ğŸ˜œ", response: "Itu kode buat terus jadi badut kamu ya ğŸ˜†" }
    ]
  },
  {
    question: "Kalo Rico jadi makanan, dia cocoknya apa?",
    options: [
      { text: "Bakso urat pedes ğŸ”¥", response: "Berani, meletup, tapi ngangenin ğŸ˜‹" },
      { text: "Coklat hangat ğŸ«", response: "Manis... dan bikin tenang banget ğŸ˜Œ" },
      { text: "Ramen kuah creamy ğŸœ", response: "Kamu suka yang lembut-lembut yaa... hihi ğŸ¥°" }
    ]
  },
  {
    question: "Kalau kamu bisa superpower, kamu pilih:",
    options: [
      { text: "Baca pikiran ğŸ§ ", response: "Wahhh jangan baca pikiran Rico, isinya kamu semua ğŸ˜³" },
      { text: "Teleport langsung ke samping Rico ğŸ’«", response: "Aku deg-degan tauk kalo kamu tiba-tiba muncul ğŸ¤" },
      { text: "Menghilang kayak ninja ğŸ¥·", response: "Tapi jan ngilang dari hidup aku ya... ğŸ¥¹" }
    ]
  },
  {
    question: "Kalau bangun pagi, hal pertama yang kamu pikirin?",
    options: [
      { text: "Lanjut tidur ğŸ˜´", response: "Ahh sama dong, soulmate tidur ğŸ˜´ğŸ’¤" },
      { text: "Sarapan ğŸ³", response: "Perut dulu baru cinta... wkwkwk!" },
      { text: "Buka chat dari Rico ğŸ“±", response: "Awww... beneran? Kamu so sweet bgt ğŸ¥°" }
    ]
  },
  {
    question: "Kalau disuruh milih, kamu pilih...",
    options: [
      { text: "Bertahan walau capek ğŸ¥º", response: "Kuat banget kamu... jangan lupa istirahat juga yaa ğŸ¤" },
      { text: "Pergi walau belum siap ğŸš¶", response: "Kadang pergi itu bentuk bertahan juga... ngerti kok ğŸ˜¢" },
      { text: "Diam tapi berisik di kepala ğŸ˜¶", response: "Aduhh kamu tuh misterius tapi penuh cerita ya ğŸ˜Œ" }
    ]
  },
  {
    question: "Kalau ada satu kata buat diri kamu hari ini?",
    options: [
      { text: "Lelah ğŸ˜®â€ğŸ’¨", response: "Gapapa... istirahat dulu yuk, kamu udah hebat banget kok ğŸ¤" },
      { text: "Berani ğŸ’ª", response: "Yess! Proud of youuu ğŸ«¶" },
      { text: "Bingung ğŸ˜µâ€ğŸ’«", response: "Tenang... pelan-pelan aja, semuanya bakal ketemu jalannya ğŸ§­" }
    ]
  }
];

  // ğŸ”Š Auto-play ulang backsound jika reload via "Ulangi"
if (localStorage.getItem("quizRefresh") === "true") {
  localStorage.removeItem("quizRefresh");
  document.getElementById("bgm").play();
}
  
</script>

</body>
</html>
